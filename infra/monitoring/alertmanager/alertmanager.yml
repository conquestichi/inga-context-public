global:
  resolve_timeout: 2m

route:
  receiver: slack-default
  group_by: ['alertname','service']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 3h
  routes:
    - matchers: ['severity="critical"']
      receiver: slack-error

receivers:
  - name: slack-default
    slack_configs:
      - api_url_file: /var/lib/prometheus/alertmanager/.slack_webhook
        send_resolved: true
        channel: '#alerts'
        username: 'AM'
        title: 'ALERT: {{ .CommonLabels.alertname }} ({{ .CommonLabels.severity }})'
        text:  'service={{ .CommonLabels.service }}'

  - name: slack-error
    slack_configs:
      - api_url_file: /var/lib/prometheus/alertmanager/.slack_webhook_error
        send_resolved: true
        channel: '#alerts-critical'
        username: 'AM'
        title: 'ALERT: {{ .CommonLabels.alertname }} ({{ .CommonLabels.severity }})'
        text:  'service={{ .CommonLabels.service }}'
